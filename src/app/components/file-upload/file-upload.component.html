<div>
  <div class="col-sm-12">

    <label for="uploader-input" ng2FileDrop [ngClass]="{'file-over': hasDropZoneOver}" (fileOver)="fileOverDropZone($event)"
      [uploader]="uploader" class="well my-drop-zone">Select files</label>

    <input id="uploader-input" ng2FileSelect type="file" style="display:none" [uploader]="uploader" [multiple]="supportMultiple"
    />

    <img [src]="filePreviewPath" height="100" *ngIf="showPreview && !supportMultiple && filePreviewPath" />

  </div>
</div>

<div *ngIf="supportMultiple">
  <div class="col-sm-12">

    <table class="table table-hover table-condensed" *ngIf="uploader?.queue?.length">
      <tbody>
        <tr *ngFor="let item of uploader.queue">
          <td>
            <img [src]="getPreviewUrl(item)" height="20" width="20" *ngIf="showPreview" />
            <strong>{{ item?.file?.name }}</strong>
          </td>

          <td nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>

          <td width="10%">
            <div class="progress" style="margin-bottom: 0;">
              <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': item.progress + '%' }"></div>
            </div>
          </td>

          <td class="text-center" width="5%">
            <span *ngIf="item.isSuccess">
              <i class="glyphicon glyphicon-ok"></i>
            </span>
            <span *ngIf="item.isCancel">
              <i class="glyphicon glyphicon-ban-circle"></i>
            </span>
            <span *ngIf="item.isError">
              <i class="glyphicon glyphicon-remove"></i>
            </span>
          </td>

          <td nowrap>
            <button type="button" class="btn btn-success btn-xs" (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
              <span class="glyphicon glyphicon-upload"></span> Upload
            </button>
            <button type="button" class="btn btn-warning btn-xs" (click)="item.cancel()" [disabled]="!item.isUploading">
              <span class="glyphicon glyphicon-ban-circle"></span> Cancel
            </button>
            <button type="button" class="btn btn-danger btn-xs" (click)="item.remove()">
              <span class="glyphicon glyphicon-trash"></span> Remove
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div>
      <p>Queue length: {{ uploader?.queue?.length }}</p>
    </div>
  </div>
</div>

<div *ngIf="showBottomActionButtons">
  <div class="col-sm-12">
    <div>
      Queue progress:
      <div class="progress" style="">
        <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
      </div>
    </div>
    <button type="button" class="btn btn-success btn-s" (click)="uploader.uploadAll()" [disabled]="!uploader.getNotUploadedItems().length">
      <span class="glyphicon glyphicon-upload"></span> {{supportMultiple ? 'Upload all' : 'Upload'}}
    </button>
    <button type="button" class="btn btn-warning btn-s" (click)="uploader.cancelAll()" [disabled]="!uploader.isUploading">
      <span class="glyphicon glyphicon-ban-circle"></span> {{supportMultiple ? 'Cancel all' : 'Cancel'}}
    </button>
    <button type="button" class="btn btn-danger btn-s" (click)="uploader.clearQueue()" [disabled]="!uploader.queue.length" *ngIf="supportMultiple">
      <span class="glyphicon glyphicon-trash"></span> Remove all
    </button>
  </div>
</div>
